<Window x:Class="AbstractApp.ProjektDetails"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:AbstractApp" 
        Title="Projektdetails" 
        WindowState="Maximized"
        Loaded="Window_Loaded">

    <Window.Resources>
        <local:ViewportConverter x:Key="ViewportConverter"/>
        <local:SizeConverter x:Key="SizeConverter"/>
    </Window.Resources>

    <Canvas>
        <Grid x:Name="DraggableGrid"
          MouseRightButtonDown="Grid_MouseRightButtonDown"
          MouseDown="Grid_MouseDown"
          MouseMove="Grid_MouseMove"
          MouseUp="Grid_MouseUp"
          Panel.ZIndex="0">

                <!-- Die Größe muss das sichtbare Fenster überdecken -->
                <Grid.Width>
                    <Binding Path="ActualWidth" 
                     RelativeSource="{RelativeSource AncestorType=Window}"
                     Converter="{StaticResource SizeConverter}"/>
                </Grid.Width>
                <Grid.Height>
                    <Binding Path="ActualHeight" 
                     RelativeSource="{RelativeSource AncestorType=Window}"
                     Converter="{StaticResource SizeConverter}"/>
                </Grid.Height>

                <Grid.RenderTransform>
                    <TranslateTransform x:Name="GridTransform"/>
                </Grid.RenderTransform>

                <Grid.Background>
                    <DrawingBrush ViewportUnits="Absolute" TileMode="Tile">
                    <DrawingBrush.Viewport>
                        <MultiBinding Converter="{StaticResource ViewportConverter}">
                            <Binding Path="RenderTransform" ElementName="DraggableGrid"/>
                        </MultiBinding>
                    </DrawingBrush.Viewport>
                    <DrawingBrush.Drawing>
                        <DrawingGroup>
                            <GeometryDrawing Brush="White">
                                <GeometryDrawing.Geometry>
                                    <RectangleGeometry Rect="0,0,20,20"/>
                                </GeometryDrawing.Geometry>
                            </GeometryDrawing>
                            <GeometryDrawing>
                                <GeometryDrawing.Pen>
                                    <Pen Brush="DarkGray" Thickness="1"/>
                                </GeometryDrawing.Pen>
                                <GeometryDrawing.Geometry>
                                    <GeometryGroup>
                                        <LineGeometry StartPoint="0,0" EndPoint="20,0"/>
                                        <LineGeometry StartPoint="0,20" EndPoint="20,20"/>
                                        <LineGeometry StartPoint="0,0" EndPoint="0,20"/>
                                        <LineGeometry StartPoint="20,0" EndPoint="20,20"/>
                                    </GeometryGroup>
                                </GeometryDrawing.Geometry>
                            </GeometryDrawing>
                        </DrawingGroup>
                    </DrawingBrush.Drawing>
                </DrawingBrush>
            </Grid.Background>
            <Grid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Eintrag hinzufügen" Click="MenuItem_EintragHinzufuegen_Click"/>
                    <MenuItem Header="Eintrag bearbeiten" Click="MenuItem_EintragBearbeiten_Click"/>
                    <MenuItem Header="Eintrag löschen" Click="MenuItem_EintragLoeschen_Click"/>
                </ContextMenu>
            </Grid.ContextMenu>
        </Grid>
        
        <StackPanel Background="White" Canvas.Left="20" Canvas.Top="20" Panel.ZIndex="1">
            <TextBlock Name="ProjektNameText" FontSize="20" FontWeight="Bold"/>
            <TextBlock Name="ErstellungsdatumText" FontSize="16" Margin="0,10,0,0"/>
        </StackPanel>

        <Button Content="Zurück" Width="100" Height="40" Click="BtnZurueck_Click"
                Canvas.Right="20" Canvas.Bottom="20" Panel.ZIndex="1"/>
    </Canvas>

</Window>